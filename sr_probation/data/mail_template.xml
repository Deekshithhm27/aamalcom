<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Email template: Notify Client SPOC and Project Manager about probation ending soon -->
        <record id="email_template_probation_warning_sr" model="mail.template">
            <field name="name">Probation Ending Soon Notification (Client SPOC  Project Manager)</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="email_from">${(user.email_formatted or '')|safe}</field>
            <field name="subject">Probation period ending soon for ${object.name} - Action Required</field>
            <field name="body_html">
                <![CDATA[
                <div style="margin: 0px; padding: 0px; font-size: 13px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear Client SPOC and Project Manager,
                    </p>
                    <br/>
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        This is to inform you that the probation period for the following employee is ending soon:
                    </p>
                    <br/>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Employee Name:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.name}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Employee ID:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.sequence or 'N/A'}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Iqama Number:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.iqama_no or 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Sponsor Number:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.sponsor_id.sponsor_no or 'N/A'}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Identification Number:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.identification_id or 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Date of Joining:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.doj or 'N/A'}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Current Probation Term:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.probation_term or 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Probation End Date:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6; color: #dc3545; font-weight: bold;">${object.probation_end_date}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Days Remaining:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6; color: #dc3545; font-weight: bold;">${object.days_remaining or 0} days</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Client SPOC:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.client_id.name or 'N/A'}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; border: 1px solid #dee2e6; font-weight: bold;">Project Manager:</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${object.company_spoc_id.name or 'N/A'}</td>
                        </tr>
                    </table>
                    <br/>
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Required Action:</strong>
                    </p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Please review the employee's probation period</li>
                        <li>If an extension is required, please create a probation extension request in the system</li>
                        <li>If the probation period is satisfactory, please proceed with the confirmation process</li>
                    </ul>
                    <br/>
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <strong>Important:</strong> This notification is sent automatically when an employee's probation period is ending within 15 days. Please take appropriate action to avoid any delays in the process.
                    </p>
                    <br/>
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Best Regards,<br/>
                        HR System - Aamalcom
                    </p>
                </div>
                ]]>
            </field>
        </record>

        <!-- Mail activity type for probation notifications -->
        <record id="mail_activity_type_probation_notify_sr" model="mail.activity.type">
            <field name="name">Probation Period Ending Notification (SR)</field>
            <field name="category">default</field>
            <field name="res_model">hr.employee</field>
            <field name="summary">Probation period ending soon - Action required</field>
            <field name="icon">
                <![CDATA[<i class="fa fa-exclamation-triangle"></i>]]>
            </field>
        </record>
    </data>
</odoo> 