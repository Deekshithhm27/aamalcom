<odoo>
    <data>

        <!-- Onboarding Process Form View -->
        <record id="view_onboarding_process_form" model="ir.ui.view">
            <field name="name">hr.onboarding.process.form</field>
            <field name="model">hr.onboarding.process</field>
            <field name="arch" type="xml">
                <form string="Onboarding Process">
                    <header>
                        <field name="status" widget="statusbar"
                               statusbar_visible="draft,issued,not issued"/>
                        <button name="action_submit" string="Submit"
                                type="object"
                                class="oe_highlight"
                                attrs="{'invisible': [('status', '!=', 'draft')]}" groups="visa_process.group_service_request_hr_employee"/>
                        <button name="action_issued"
                                string="Submit"
                                type="object"
                                class="oe_highlight"
                                attrs="{'invisible': [('status', '!=', 'not_issued')]}" groups="visa_process.group_service_request_it_employee"/>
                    </header>


                    <sheet>
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                        
                        <group>
                            <field name="employee_id" options="{'no_create': True}" attrs="{'readonly': [('status', '!=','draft')]}"/>
                            <field name="date_of_joining" readonly="1"/>
                            <field name="user_id" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                            <field name="active" invisible="1"/>
                            <field name="name" invisible="1"/>
                        </group>

                        <notebook>
                            <page string="Checklist">
                            <field name="checklist_line_ids" force_save="1">
                                <tree editable="bottom" create="false" delete="false">
                                    <field name="onboarding_checklist_id" attrs="{'readonly': [('status','!=','draft')]}"/>
                                    <field name="comments" attrs="{'readonly': [('status','not in',('not_issued','draft'))]}"/>  
                                    <button name="action_issue_item" string="Issued" type="object" class="oe_highlight" attrs="{'invisible': [('status', '=', 'issued')]}" groups="visa_process.group_service_request_it_employee"/>
                                    <field name="status" attrs="{'readonly': [('status','!=','not_issued')]}"/>

                                    <button name="action_remove_item" string="Remove" type="object" class="btn btn-secondary" confirm="Are you sure you want to remove this checklist item?" attrs="{'invisible': [('status', '=', 'issued')]}" groups="visa_process.group_service_request_it_employee"/>
                                </tree>
                            </field>


                            </page>
                        </notebook>
                    </sheet>
                    <!-- Add chatter for logs -->
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Onboarding Process Tree View -->
        <record id="view_onboarding_process_tree" model="ir.ui.view">
            <field name="name">hr.onboarding.process.tree</field>
            <field name="model">hr.onboarding.process</field>
            <field name="arch" type="xml">
                <tree string="Onboarding Processes">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="status"/>
                </tree>
            </field>
        </record>

        <!-- Onboarding Process Action -->
        <record id="action_onboarding_process" model="ir.actions.act_window">
            <field name="name">Onboarding Process</field>
            <field name="res_model">hr.onboarding.process</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>
