<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="service_enquiry_form_inherit_for_service_visa_cancellation" model="ir.ui.view">
        <field name="name">service.enquiry.form.request.visa</field>
        <field name="model">service.enquiry</field>
        <field name="inherit_id" ref="visa_process.service_enquiry_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="action_submit" string="Submit" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('service_request', '!=', 'visa_cancellation')]}"/>
                <button name="action_submit_to_ministry" string="Documents Upload" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('state', '!=', 'submitted'), '|', ('upload_visa_cancellation_doc', '=', False),  ('service_request', '!=', 'visa_cancellation')]}" groups="visa_process.group_service_request_employee"/>
                <button name="action_approved_by_ministry" string="Approve" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('state', '!=', 'waiting_for_minitry_approvals'), ('service_request', '!=', 'visa_cancellation')]}" groups="visa_process.group_service_request_employee"/>
                <button name="action_submit_to_treasury_visa_cancellation" string="Submit to treasury" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('state', '!=', 'approved_ministry'), '|', ('upload_confirmation_visa_doc', '=', False), ('service_request', '!=', 'visa_cancellation')]}" groups="visa_process.group_service_request_employee"/>
            </xpath>
             <xpath expr="//notebook[@id='notebook_four']" position="before">
                <group name="final_exit" attrs="{'invisible': ['|',('service_request', '!=', 'visa_cancellation'),('state', '=','draft')]}">
                    <group>
                        <field name="ref_ev_id" attrs="{'readonly': ['|',('state', '!=','submitted'),('is_project_manager', '!=', True)]}" options="{'no_create': True, 'no_edit': True}"/>
                        <field name="reason_of_cancellation" attrs="{'readonly': ['|',('state', '!=','submitted'),('is_project_manager', '!=', True)]}"/>
                    </group>
                </group>
            </xpath>
                    <xpath expr="//notebook[@id='notebook_four']" position="after">
                <group  attrs="{'invisible': ['|','|',('service_request', '!=', 'visa_cancellation'),('state','=','draft'),('first_govt_employee_id','=',False)]}">
                    <group>
                        <field name="upload_visa_cancellation_doc" 
                            filename="upload_visa_cancellation_doc_file_name" force_save="1"  attrs="{'readonly': ['|',('state', '!=','submitted'),('is_service_request_client_spoc', '=', True)]}"/>
                        <field name="upload_visa_cancellation_doc_file_name" invisible="1"/>
                        <field name="visa_cancellation_doc_ref" string="Ref No.*"
                            force_save="1" attrs="{'readonly': ['|',('state', '!=','submitted'),('is_service_request_client_spoc', '=', True)]}"/>
                    </group>
                    <group attrs="{'invisible': ['|',('service_request', '!=', 'visa_cancellation'),('state','in',('draft','submitted'))]}">
                        <field name="upload_confirmation_visa_doc" 
                            filename="upload_confirmation_visa_file_name" force_save="1"  attrs="{'readonly': ['|',('state', '!=','approved_ministry'),('is_service_request_client_spoc', '=', True)]}"/>
                        <field name="upload_confirmation_visa_file_name" invisible="1"/>
                        <field name="confirmation_visa_doc_ref" string="Ref No.*"
                            force_save="1" attrs="{'readonly': ['|',('state', '!=','approved_ministry'),('is_service_request_client_spoc', '=', True)]}"/>
                    </group>
                </group>
                 <group string="Payment Confirmation Documents" attrs="{'invisible': ['|', ('service_request', '!=', 'visa_cancellation'), ('state', 'in', ('draft', 'submitted'))]}">
                        <group >
                            <field name="upload_payment_doc"  attrs="{'readonly': ['|', ('state', '!=', 'payment_initiation'), '|', ('is_project_manager', '=', True), ('is_gov_employee', '=', True)]}"  filename="upload_payment_doc_file_name"/>
                            <field name="upload_payment_doc_file_name"  attrs="{'readonly': ['|', ('state', '!=', 'payment_initiation'), '|', ('is_project_manager', '=', True), ('is_gov_employee', '=', True)]}"  invisible="1"/>
                            <field name="payment_doc_ref" attrs="{'readonly': ['|', ('state', '!=', 'payment_initiation'), '|', ('is_project_manager', '=', True), ('is_gov_employee', '=', True)]}"/>
                        </group>
                    </group> 
            </xpath>
        </field>
    </record>
</odoo>